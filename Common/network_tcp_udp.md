# TCP & UDP

## 1. TCP和UDP的区别

| **功能** | **TCP** | **UDP** |
| --- | --- | --- |
| 是否建立连接 | 需建立连接 | 无需建立连接 |
| 是否可靠 | 提供可靠传输：有序、无差错、无丢失、不重复 | 不可靠 |
| 是否提供网络控制 | 提供流量控制和拥塞控制机制 | 不提供流量控制和拥塞控制机制 |
| 数据格式 | 字节流：需要先将**数据分组**，然后再接收端**重组** | 数据报 |

## 2. TCP建立连接
TCP通过三次握手建立可靠连接：
* 客户端（SYN-SENT）->服务器发起**建立连接请求**：`[SYN], seq = x`
* 服务器（SYN-RCVD）->客户端返回**确认信息**：`[SYN, ACK], seq = y, ack = x + 1`
* 客户端（ESTABLISHED）->服务器返回**确认信息**：`[ACK], seq = x + 1, ack = y + 1`。服务器在接收到确认信息后，状态变为**ESTABLISHED**

TCP需要三次握手建立连接原因：**为了防止失效的（网络延迟）客户端连接请求包被服务器接收。**
