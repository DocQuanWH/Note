# 操作系统

## 1. 进程和线程
### 1.1. 进程
**进程**表示**资源分配**的基本单位，也是**调度运行**的基本单位。当用户运行一个程序：
1. 操作系统就会为该程序创建一个进程，分配相关资源
2. 进程调度程序运行该程序，并分配CPU资源及其它相关资源

但在**微内核**中，**进程**的功能变成了**资源分配的单位**，而**线程**才是真正**调度的单位**。

### 1.2 线程
线程是进程中执行预算的最小单位。如果将进程理解为操作系统的一次任务，那么线程就是该任务的一系列子任务。引入线程的好处如下：
1. 提高并发性：进程可以创建多个进程同时执行一些任务
2. 线程切换的所需开销较小（上下文数据小，所需资源较小）

### 1.2 进程和线程
1. 一个线程只能属于一个线程，一个进程可以创建多个线程
2. 资源分配给进程，同一进程的所有线程共享进程所有资源

## 2. 进程/线程同步
进程和线程之间的同步机制有四种：
1. **临界区（Critical Section）**：线程串行的访问公共资源或代码，任意时刻只允许一个线程对共享资源进行访问，其它线程想必须等到该线程结束后才能对其进行抢占。
2. **互斥量（Mutex）**：只有拥有**互斥对象**线程才能访问公共资源。因为互斥对象唯一，因此保证公共资源不会同时被多个线程访问。

> **互斥量**和**临界区**的作用相似，但互斥量可以跨线程/线程使用，因此互斥量需要更多的资源。因此，**临界区更适合只在进程内部同步的使用场景**。

3. **信号量（Semaphore）**：它允许多个线程同一时刻访问同一资源，但限制同时访问该资源的最大数量。
4. **事件（Event）**：通过通知操作的方式保持线程的同步，还可以方便实现对多个线程的优先级比较。


## 3. 进程/线程通信：TODO
