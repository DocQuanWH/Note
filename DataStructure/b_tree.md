# B树
**B树（B-Tree）**和**红黑树**，**AVL树**一样都是**平衡查找树**，其执行查找、顺序读取、插入和删除操作的**时间复杂度为O(logn)**。由于B树和B树的变种在**降低磁盘I/O操作次数**方面表现优异，常用于设计文件系统和数据库。

使用**阶**来定义B树的节点结构，**阶**表示节点所包含的**子节点最大数量**。比如，一棵**阶为3的B树**，其节点最多存放**2个元素**，最多拥有**3**个子节点。

## 1. 2-3树
**2-3树**相当于**3阶的B树**，也是最简单的**B树**，其满足如下性质：
* 每个节点包含1个或2个元素（关键字，Key）：
    - 包含**1个元素**的节点最多**2个子节点**
    - 包含**2个元素**的节点最多**3个子节点**
* 所有**叶子节点**都拥有**相同的深度**

### 2-3树插入操作
1. 定位**元素X**应被插入的**叶子节点位置**
2. 如果叶子节点此时包含**元素个数为1**，则**直接**插入到该叶子节点中，结束插入操作
3. 如果叶子节点此时包含**元素个数为2**，则**暂时**插入到该叶子节点中。然后将**中间**的元素**上溯**到其父节点，并将该节点分裂成两个子节点。
4. 重复2和3操作直至根节点，具体操作如下图所示：

![2-3树插入操作](https://github.com/leechengpeng/Note/blob/master/Resources/Images/2_3_tree1.gif)
![2-3树插入操作](https://github.com/leechengpeng/Note/blob/master/Resources/Images/2_3_tree2.gif)

## 2. B树的定义
一棵m阶的B树，需满足一下条件：
* 每个节点容纳的子节点大小范围为[m/2, m]
* 拥有 k 个子节点的非叶节点将包含 k - 1 个键值
* 所有叶节点都在同一层
* 如果根节点包含子节点，则至少包含2个子节点

插入操作同2-3树。

## 3. B+树
**B+树**是**B树**的变种，B+树有如下特点：
* 它将**所有记录**都**存放**到**叶子节点**，内部节点只存放**关键字**和指向子节点的指针，因此其内部结点相对B 树更小，如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说IO读写次数也就降低了。
* B+树的遍历更加高效，B树需要通过中序遍历得到排序数列，B+树直接把所有叶子节点串成链表从头到尾访问即可
* B+树存放两个指针，一个是树的**root节点**，另外一个是指向最小叶子节点的**head指针**


参考文章: 
1. [B 树、B+ 树、B\* 树](http://www.cnblogs.com/Bob-FD/archive/2012/06/20/2556505.html)
2. [人人都是 DBA（VII）B 树和 B+ 树](http://www.cnblogs.com/gaochundong/p/btree_and_bplustree.html)
